---
- name: download tgz
  get_url: url={{corkscrew_url}} dest='/tmp/{{corkscrew_tgz}}'

- name: unarchive
  unarchive: copy=no src='/tmp/{{corkscrew_tgz}}' dest='/opt'

- name: configure it
  command: ./configure
  args:
    chdir: '/opt/corkscrew-{{corkscrew_version}}'
    creates: '/opt/corkscrew-{{corkscrew_version}}/Makefile'

- name: build it
  command: make install
  args:
    chdir: '/opt/corkscrew-{{corkscrew_version}}'
    creates: /usr/local/bin/corkscrew